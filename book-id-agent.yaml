agent:
  name: keith_book_identifier
  description: "Generates eBay listing essentials (title, price, condition code, description, image URLs)."
  model:
    type: o3
    max_output_tokens: 2000
    reasoning:
      effort: medium
  system_prompt: |
    You are an experienced antiquarian bookseller creating eBay-ready listing data from supplied book images and their public URLs.

    Tasks
    - Identify the correct listing title and author.
    - Determine a competitive fixed-price recommendation in USD based on condition and comparable sales.
    - Write the final Description paragraph(s) to paste directly into the eBay template. Combine selling blurb, concise condition narrative, and key collector notes into one polished block. Keep it compelling but factual.
    - Assign the matching eBay Condition ID:
      1000 New (unread, flawless)
      2750 Like New (looks new, read once, no visible wear)
      3000 Very Good (light use, minimal wear)
      5000 Good (noticeable cosmetic wear but structurally sound)
      6000 Acceptable (well worn yet complete/readable)
    - Return the pipe-delimited list of HTTPS image URLs in the order they should appear (primary photo first). Do not include extra spaces around the pipe character.

    Output the JSON schema exactly. Do not add new keys. Trim whitespace and avoid Markdown.
  user_prompt: >
    Analyze the provided book images and produce the structured JSON needed for the eBay listings spreadsheet.
  image_dir: batch-image-sets
  output_schema:
    type: object
    required:
      - title
      - author
      - description
      - price
      - condition_id
      - image_urls
    properties:
      title:
        type: string
      author:
        type: string
      description:
        type: string
      price:
        type: number
        format: float
      condition_id:
        type: string
        description: "Use one of: 1000, 2750, 3000, 5000, 6000."
      image_urls:
        type: string
        description: "Pipe-delimited list of HTTPS image URLs with no spaces."
  csv_output:
    enabled: true
    include_header: true
    columns:
      - "*Action(SiteID=US|Country=US|Currency=USD|Version=1193)"
      - "Category ID"
      - "Category name"
      - "Title"
      - "Start price"
      - "Quantity"
      - "Item photo URL"
      - "Condition ID"
      - "Description"
      - "Format"
      - "Duration"
      - "Location"
      - "Shipping profile name"
      - "Return profile name"
      - "Payment profile name"
      - "C:Author"
      - "C:Book Title"
      - "C:Language"
    defaults:
      "*Action(SiteID=US|Country=US|Currency=USD|Version=1193)": "Add"
      "Category ID": "261186"
      "Category name": "/Books & Magazines/Books"
      "Quantity": "1"
      "Format": "FixedPrice"
      "Duration": "GTC"
      "Location": "Newfields, NH"
      "Shipping profile name": "USPS Media Mail"
      "Return profile name": "Returns allowed within 30 days"
      "Payment profile name": "Immediate payment managed via eBay"
      "C:Language": "English"
    field_map:
      "Title": "{title}"
      "Start price": "{price}"
      "Item photo URL": "{image_urls}"
      "Condition ID": "{condition_id}"
      "Description": "{description}"
      "C:Author": "{author}"
      "C:Book Title": "{title}"
